## elecnectaについて
政党比較アプリelecnecta（エレクネクタ）は、「国民の政治選択を分かりやすくし、主体感を促す」ことをコンセプトに生まれたAIエージェントです！<br>
ユーザーの性別や年齢、居住地域などのパーソナル情報をヒアリングし、個人に関心のある政治のテーマや議題をピックアップ、ユーザー自身が気になった議題に関して、各政党の政策や方針を調べて、分かりやすくまとめてくれます。<br>
詳細はリンク先ページをご覧ください。<br>
[GCEへのDify構築とアプリ公開まで | 政党比較アプリ「elecnecta」](https://zenn.dev/ghillie/articles/0abaad648dcd91)

## 構築方法
### インフラ構築
Google Cloud Compute Engine を使用してデプロイします。<br>
インスタンスの作成〜Difyのインストールまでを上記の記事で解説していますので参考にしてください。

#### 自動化スクリプトについて
同梱のスクリプトをVM上で実行することで、上記に記載の環境構築の大部分を自動化できます。<br>
インスタンス作成直後のDebianでそのまま実行してください。

#### 使用方法
deploy.shのスクリプト内容をそのままコピーし、サーバー上でファイルに保存します（例: deploy.sh）。<br>
保存後、"sudo bash setup_dify.sh" を実行するとインストールが開始されます。処理が完了するまで数分待ち、エラーが出なければセットアップ成功です。

注意: スクリプト内のデータベースパスワード 'dify-password' や管理者メールアドレスなどは環境に合わせて変更してください。スクリプト実行後、必ずロードバランサーと独自ドメインの設定を別途行い（参考ページの手順5を参照）、/install ページで管理者ユーザーを作成してください。

### アプリ構築
#### DSLファイルについて
dify_app.yml が Difyにインポート可能なYML形式の定義ファイルになっています。<br>
Dify の UI からアップロードすることでアプリが作成されます。

#### カスタム検索コードについて
Google Custom Search API を用いた検索用のカスタムツールをDify内に定義する必要があります。
custom_custom_search.pyをコードブロックに入力して使用、またはDifyワークフローとして作成してカスタムツールとして親アプリから呼び出すようにしてください。